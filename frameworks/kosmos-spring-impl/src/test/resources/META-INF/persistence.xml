<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" 
xmlns="http://java.sun.com/xml/ns/persistence" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
   
  <!-- JTA/AspectJ使用 --> 
  <persistence-unit name="default" transaction-type="JTA">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <jta-data-source>jdbc/__default</jta-data-source>
    <properties>
 	    <property name="eclipselink.logging.level" value="ALL" />
	    <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
    </properties>
  </persistence-unit>
 
  <!-- ローカルリソース使用 -->
  <persistence-unit name="derby" transaction-type="RESOURCE_LOCAL">
   	<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>  	
   	<class>framework.service.test.entity.TestEntity</class>	
    <properties>
       <property name="eclipselink.target-database" value="DERBY" />         
           	<property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
            <property name="eclipselink.logging.level" value="ALL" />
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/SampleDB"/>
            <property name="javax.persistence.jdbc.user" value="APP" />
            <property name="javax.persistence.jdbc.password" value="APP" />       
            <property name="eclipselink.jdbc.connections.min" value="4"/>
			<property name="eclipselink.jdbc.connections.max" value="4"/>
            <property name="eclipselink.ddl-generation.output-mode" value="database"/>         
			<property name="eclipselink.persistence-context.flush-mode" value="AUTO" /> 
     </properties>
  </persistence-unit> 	
  
  <!-- 単体テスト用Oracle -->
  <persistence-unit name="oracle" transaction-type="RESOURCE_LOCAL">
   	<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>  	
   	<class>framework.service.test.entity.TestEntity</class>	   
    <properties>
    
	    	<property name="eclipselink.exception-handler" value="kosmos.framework.service.test.DumyExceptionHandler"/>      	 
    	 	<property name="eclipselink.target-database" value="ORACLE" />    
      	 	<property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>                
         	<property name="eclipselink.logging.level" value="ALL" />
         	 <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.OracleDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:XE"/>
        	<property name="javax.persistence.jdbc.user" value="yoshida" />
        	<property name="javax.persistence.jdbc.password" value="yoshida" />       
        	<property name="eclipselink.jdbc.connections.min" value="10"/>
			<property name="eclipselink.jdbc.connections.max" value="10"/>
        	<property name="eclipselink.ddl-generation.output-mode" value="database"/>         
			<property name="eclipselink.persistence-context.flush-mode" value="AUTO" /> 
     </properties>
  </persistence-unit> 
  
    <!-- 単体テスト用Oracle -->
  <persistence-unit name="readOnlyOracle" transaction-type="RESOURCE_LOCAL">
   	<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>  	
   	<class>framework.service.test.entity.TestEntity</class>	   
    <properties>
    		<property name="eclipselink.jdbc.batch-writing" value="JDBC"/>
	    	<property name="eclipselink.exception-handler" value="kosmos.framework.service.test.DumyExceptionHandler"/>      	 
    	 	<property name="eclipselink.target-database" value="ORACLE" />         	 	      
         	<property name="eclipselink.logging.level" value="ALL" />
         	 <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.OracleDriver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:XE"/>
        	<property name="javax.persistence.jdbc.user" value="yoshida" />
        	<property name="javax.persistence.jdbc.password" value="yoshida" />       
        	<property name="eclipselink.jdbc.connections.min" value="10"/>
			<property name="eclipselink.jdbc.connections.max" value="10"/>
        	<property name="eclipselink.ddl-generation.output-mode" value="database"/>         
			<property name="eclipselink.persistence-context.flush-mode" value="AUTO" /> 
     </properties>
  </persistence-unit> 
  
  <!-- ローカルリソース使用Oracle -->
 <!--  <persistence-unit name="oracleAspectJ" transaction-type="RESOURCE_LOCAL">
   	<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>  	
   	<class>framework.service.test.entity.TestEntity</class>	
    <properties>
 			 	<property name="eclipselink.target-database" value="ORACLE" />                    
         	<property name="eclipselink.logging.level" value="ALL" />
        	<property name="javax.persistence.jdbc.user" value="yoshida" />
        	<property name="javax.persistence.jdbc.password" value="yoshida" />       
        	<property name="eclipselink.jdbc.connections.min" value="4"/>
			<property name="eclipselink.jdbc.connections.max" value="4"/>
        	<property name="eclipselink.ddl-generation.output-mode" value="database"/>         
			<property name="eclipselink.persistence-context.flush-mode" value="AUTO" /> 
     </properties>
  </persistence-unit> 	
 -->
</persistence>
